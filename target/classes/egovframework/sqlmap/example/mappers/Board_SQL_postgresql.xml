<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.example.board.service.impl.BoardMapper">

	<resultMap id="board" type="egovframework.example.board.service.BoardVO">
		<result property="id" column="ID"/>
        <result property="title" column="TITLE"/>
        <result property="content" column="CONTENT"/>
        <result property="writer" column="WRITER"/>
        <result property="viewCnt" column="VIEW_CNT"/>
        <result property="noticeYn" column="NOTICE_YN"/>
        <result property="deleteYn" column="DELETE_YN"/>
        <result property="createdDate" column="CREATED_DATE"/>
        <result property="modifiedDate" column="MODIFIED_DATE"/>
	</resultMap>
	
	<insert id="insertBoard" parameterType="BoardVO">
		
		INSERT INTO SAMPLE
			( ID
			  , TITLE
			  , CONTENT
			  , WRITER
			  , VIEW_CNT
			  , NOTICE_YN
			  , DELETE_YN
			  , CREATED_DATE
			  , MODIFIED_DATE)
		VALUES ( #{id}
			  , #{title}
			  , #{writer}
			  , #{noticeYn}
			  , #{deleteYn}
			  , #{createdDate}
			  , #{modifiedDate})
	</insert>
	
	<update id ="updateBoard">
	
		UPDATE BOARD
		SET ID=#{id}
				, TITLE=#{title}
	            , CONTENT=#{content}
	            , WRITER=#{writer}
	            , VIEW_CNT=#{viewCnt}
	            , NOTICE_YN=#{noticeYn}
	            , DELETE_YN=#{deleteYn}
	            , CREATED_DATE=#{createdDate}
	            , MODIFIED_DATE=#{modifiedDate}
				WHERE ID=#{id}
	</update>
	
	<delete id="deleteBoard">
		DELETE FROM BOARD
		WHERE ID=#{id}
	</delete>
	
	<select id="selectBoard" resultMap="board">
	    SELECT
	        ID, TITLE, CONTENT, WRITER, VIEW_CNT, NOTICE_YN, DELETE_YN, CREATED_DATE, MODIFIED_DATE
	    FROM BOARD 
	    WHERE ID=#{id}
	</select>
	
	<select id="selectBoardList" parameterType="searchVO" resultType="egovMap">
	    SELECT
	        ID, TITLE, CONTENT, WRITER, VIEW_CNT, NOTICE_YN, DELETE_YN, CREATED_DATE, MODIFIED_DATE
	    FROM BOARD
	    WHERE 1=1
			<if test="searchKeyword != null and searchKeyword != ''">
		        <choose>
		            <when test="searchCondition == 0">
						AND	ID LIKE '%' || #{searchKeyword} || '%'
					</when>
		            <when test="searchCondition == 1">
						AND	NAME LIKE '%' || #{searchKeyword} || '%'
					</when>
				</choose>
			</if>
			ORDER BY ID ASC
			LIMIT #{recordCountPerPage} OFFSET #{firstIndex} 
	</select>
	
	<select id="selectBoardListTotCnt" parameterType="searchVO" resultType="int">
	    SELECT COUNT(*) totcnt
			FROM SAMPLE
			WHERE 1=1
			<if test="searchKeyword != null and searchKeyword != ''">
		        <choose>
		            <when test="searchCondition == 0">
						AND ID LIKE '%' || #{searchKeyword} || '%'
					</when>
		            <when test="searchCondition == 1">
						AND	NAME LIKE '%' || #{searchKeyword} || '%'
					</when>
				</choose>
			</if>
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>