<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Board">

	<typeAlias  alias="egovMap" type="org.egovframe.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="searchVO" type="egovframework.example.board.service.BoardDefaultVO"/>
	
	<resultMap id="board" class="egovframework.example.board.service.BoardVO">
       <result property="id" column="ID"/>
       <result property="title" column="TITLE"/>
       <result property="content" column="CONTENT"/>
       <result property="writer" column="WRITER"/>
       <result property="viewCnt" column="VIEW_CNT"/>
       <result property="noticeYn" column="NOTICE_YN"/>
       <result property="deleteYn" column="DELETE_YN"/>
       <result property="createdDate" column="CREATED_DATE"/>
       <result property="modifiedDate" column="MODIFIED_DATE"/>
    </resultMap>

	<insert id="insertBoard">
	    <![CDATA[
	        INSERT INTO BOARD 
	            ( ID
	              , TITLE
	              , CONTENT
	              , WRITER
	              , VIEW_CNT
	              , NOTICE_YN
	              , DELETE_YN
	              , CREATED_DATE
	              , MODIFIED_DATE )
	        VALUES ( #id#
	              , #title#
	              , #content#
	              , #writer#
	              , #viewCnt#
	              , #noticeYn#
	              , #deleteYn#
	              , #createdDate#
	              , #modifiedDate# )
	    ]]>
	</insert>
	
	<update id="boardDAO.updateBoard">
	    <![CDATA[
	        UPDATE BOARD
	        SET ID=#id#
	            , TITLE=#title#
	            , CONTENT=#content#
	            , WRITER=#writer#
	            , VIEW_CNT=#viewCnt#
	            , NOTICE_YN=#noticeYn#
	            , DELETE_YN=#deleteYn#
	            , CREATED_DATE=#createdDate#
	            , MODIFIED_DATE=#modifiedDate#
	        WHERE ID=#id#
	    ]]>
	</update>
	
	<delete id="boardDAO.deleteBoard">
	    <![CDATA[
	        DELETE FROM BOARD 
	        WHERE ID=#id#
	    ]]>
	</delete>
	
	<select id="boardDAO.selectBoard" parameterClass="int" resultClass="your.package.BoardVO">
	    SELECT
	        ID, TITLE, CONTENT, WRITER, VIEW_CNT, NOTICE_YN, DELETE_YN, CREATED_DATE, MODIFIED_DATE
	    FROM BOARD 
	    WHERE ID=#{id}
	</select>
	
	<select id="boardDAO.selectBoardList" parameterClass="searchVO" resultClass="egovMap">
	    SELECT
	        ID, TITLE, CONTENT, WRITER, VIEW_CNT, NOTICE_YN, DELETE_YN, CREATED_DATE, MODIFIED_DATE
	    FROM BOARD
	    WHERE 1=1
	    <isEqual prepend="AND" property="searchCondition" compareValue="0">
	        ID LIKE '%' || #searchKeyword# || '%'
	    </isEqual>
	    <isEqual prepend="AND" property="searchCondition" compareValue="1">
	        TITLE LIKE '%' || #searchKeyword# || '%'
	    </isEqual>
	    ORDER BY ID DESC
	    LIMIT #recordCountPerPage# OFFSET #firstIndex#     
	</select>
	
	<select id="boardDAO.selectBoardListTotCnt" parameterClass="searchVO" resultClass="int">
	    SELECT COUNT(*) totcnt
	    FROM BOARD
	    WHERE 1=1
	    <isEqual prepend="AND" property="searchCondition" compareValue="0">
	        ID LIKE '%' || #searchKeyword# || '%'
	    </isEqual>
	    <isEqual prepend="AND" property="searchCondition" compareValue="1">
	        TITLE LIKE '%' || #searchKeyword# || '%'
	    </isEqual>
	</select>
		
	
	
</sqlMap>